<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
		*{
			margin: 0;
			padding: 0;
		}
		.par{
			width: 300px;
			height: 300px;
			border: 1px solid black;
			position: relative;
		}
		.son{
			width: 50px;
			height: 50px;
			background: red;
			position: absolute;
			top: 0;
			left: 0;
		}

	</style>
</head>
<body>
	<div class="par" id="par">
		<div class="son" id="son"></div>
	</div>
	<input type="button" value="顺时针" class="but1 direc">
	<input type="button" value="逆时针" class="but2 direc">
	<input type="text" placeholder="速度" class="text1" id="speed">
	<input type="text" placeholder="圈数" class="text2" id="race">
	<input type="button" value="确定" class="but3" id="sure">

<script>
	var par=document.getElementById('par');
	var son=document.getElementById('son');
	var direc=document.querySelectorAll('.direc');

	var sure=document.getElementById('sure');
	var speed=document.getElementById('speed');
	var race=document.getElementById('race');
	var maxX=par.clientWidth-son.clientWidth;
	var maxY=par.clientHeight-son.clientHeight;	
	var direction=true;
	var iTimer=null;
	var raceNum=0;
	var thedir;

    theClick();
    //确定按钮绑定事件
    function theClick()
    {
    	for(var i=0;i<direc.length;i++)
    	{
    		direc[i].onclick=(function(index)
    		{
    			return function()
    			{
                    thedir=index;
    			}

    		})(i)
    	}
    	sure.onclick=function()
    	{
    		enter();
    		
    	}
    }
    //输入信息函数
    function enter()
    {
    	var raceVue=parseInt(race.value);
    	var speedVue=parseInt(speed.value);
    	timer(speedVue,speedVue,thedir);
    }


    //转圈
    function move(speed,theraceNum,dir)
    {
    	if(dir==0)
    	{
    		direction=true;
    	}
    	else
    	{
    		direction=false;
    	}
    	
    	var theleft=son.offsetLeft;
    	var thetop=son.offsetTop;

    	if(direction&&raceNum<theraceNum)
    	{
           if(theleft<maxX&&thetop==0)
           {
           	theleft+=speed;
           	if(theleft>=maxX)
           	{
               theleft=maxX;
           	}

           }

           if(theleft==maxX&&thetop<=maxY)
           {
           	
           	thetop+=speed;
           	if(thetop>=maxY)
           	{
               thetop=maxY;
           	}
           }

           if(theleft>=0&&thetop==maxY)
           {
           	
           	theleft-=speed;
           	if(theleft<=0)
           	{
               theleft=0;
           	}
           }

           if(theleft==0&&thetop>=0)
           {
           	
           	thetop-=speed;
           	if(thetop<=0)
           	{
               thetop=0;
           	   raceNum++;
           	}
           }
    	}
    	son.style.left=theleft+'px';
    	son.style.top=thetop+'px';
    	
    }


    //转圈定时器
    function timer(speed,theraceNum,dir)
    {
    	clearInterval(iTimer);
    	iTimer=setInterval(function()
    	{
           move(speed,theraceNum,dir);
    	},10)
    }

    //获取某个元素left值方法，用offsetLeft
    //为某个元素赋left值，用style
</script>
</body>
</html>