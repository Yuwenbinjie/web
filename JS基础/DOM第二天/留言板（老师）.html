<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css">
			* { padding: 0; margin: 0; font-size: 14px; }
			ul { list-style: none; }
			a,a:hover { text-decoration:none; }
			a,input,textarea { outline: none; }
			.clearfix:after { content: "."; display: block; height: 0; clear: both; visibility: hidden; }
			.clearfix { display:inline-block; }
			.clearfix { display:block; }
			
			.msg_mod { width: 500px; margin: 20px auto; }
			.msg_mod .m_box { width: 100%; padding: 10px; border: 1px #ccc solid; border-radius: 3px; background: #f4f4f4; }
			.msg_mod .m_line { margin-top: 10px; }
			.msg_mod .m_line .fl { float: left; }
			.msg_mod .m_line .fr { float: right; }
			.msg_mod .m_line .font { width: 50px; } 
			.msg_mod .m_line .input,
			.msg_mod .m_line .textarea { width: 438px; padding: 0 5px; background: #fff; border: 1px #ccc solid; border-radius: 2px; } 
			.msg_mod .m_line .font,
			.msg_mod .m_line .input { height: 30px; line-height: 30px; }
			.msg_mod .m_line .textarea { height: 120px; padding: 5px 5px; line-height: 16px; }
			.msg_mod .m_line .submit { width: 60px; height: 30px; line-height: 30px; text-align: center; border: 1px #ccc solid; border-radius: 2px; cursor: pointer; }
			
			.msg_mod .m_title { padding-top: 20px; font-size: 20px; }
			.msg_mod .m_cont { padding-top: 20px; }
			.msg_mod .m_cont ul li { padding-top: 15px; }
			.msg_mod .m_cont h3 { width: 100%; height: 30px; padding-left: 20px; line-height: 30px; background: #ccc; }
			.msg_mod .m_cont p { width: 100%; height: auto; padding-left: 20px; line-height: 60px; background: #f4f4f4; overflow: hidden; }
			/*文字强制不换行  white-space:nowrap; overflow:hidden
            文字省略号  text-overflow:ellipsis; */
			.msg_mod .m_cont p a { float: right; display: inline; margin-right: 20px; }
		</style>
</head>
<body>
	<div class="msg_mod">
		<div class="m_box">
			<form action="" method="post">
				<div class="m_line clearfix">
					<span class="fl font">姓名：</span>
					<input type="text" class="fr input" id="name">
				</div>

				<div class="m_line clearfix">
					<span class="fl font">内容：</span>
					<textarea class="fr textarea" id="msg"></textarea> 
				</div>

				<div class="m_line clearfix">
					<input type="button" value="提交" id="sub" class="fr submit">
				</div>
			</form>
		</div>
		
		<h2 class="m_title">显示留言</h2>
		<div class="m_cont">
			<ul id="list"></ul>
		</div>
	</div>
	<script src="tween.js"></script>
	<script>

	message();
	function message()
	{
	    var iname=document.getElementById('name');
	    var msg=document.getElementById('msg');
	    var submitBtn=document.getElementById('sub');
	    var list=document.getElementById('list');
	    var timer=null;
	    var lock=false;//开关
		//提交留言
		submitBtn.onclick=function()
		{
			if(lock)
			{
               return;
			}
			else
			{
			lock=true;
			var nameVal=iname.value;
			var msgVal=msg.value;
			if(nameVal==""||msgVal=="")
			{
				alert('不能为空！');
				lock=false;
				return;
			}
			else
			{
                var li=document.createElement('li');
                li.innerHTML="<h3>"+nameVal+"</h3><p>"+msgVal+"<a href='#'>删除</a></p>";
                list.insertBefore(li,list.firstElementChild);
			}
			removeItem(li);//传参

			//开始高度0
			//最终高度li.offsetHeight
			animation(0,li.offsetHeight,li);
		    }
		}

		//删除功能
		function removeItem(obj)
		{
            var removeBtn=obj.getElementsByTagName('a')[0];
            removeBtn.onclick=function ()
            {
            	animation(obj.offsetHeight,0,obj);
            }
		}
		//动画效果
		function animation(bnum,endnum,obj)
		{
			var t=0;
			var b=bnum;
			var c=endnum-bnum;
			var d=30;

			timer=setInterval(function()
			{
				t++;
				if(t>=d)
				{
					if(endnum==0) list.removeChild(obj);
					clearInterval(timer);
					lock=false;

				}
				obj.style.height=Tween.Quad.easeOut(t,b,c,d)+'px';
			},30)
		}

    }

	</script>
</body>
</html>